<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Gradients &middot; Sunny
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0c">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Sunny
        </a>
      </h1>
      <p class="lead">This is my personal blog Welcome ！<a href="https://twitter.com/sipdar" target="_blank">@sunny</a>.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>
      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">Archives</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
      
<!--       <a class="sidebar-nav-item" href="https://github.com/sipdar/archive/v2.1.0.zip">Download</a> -->
      <a class="sidebar-nav-item" href="https://github.com/sipdar">GitHub project</a>
      <a class="sidebar-nav-item" href="mailto:sipdar@163.com">Email</a>
<!--       <span class="sidebar-nav-item">Currently v2.1.0</span> -->

    </nav>

    <p>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Gradients</h1>
  <span class="post-date">24 Mar 2014</span>
  <p><strong>Quartz **提供了两种绘制渐变的数据类型，</strong>CGShadingRef** 和<strong>CGGradientRef</strong> 我们都可以始终这两种方式来绘制线性渐变或者辐射渐变。</p>

<p><img src="http://sipdar.github.io/image/2014/03/24/gradient1.png" alt="image"></p>

<h1>CGGradientRef</h1>

<h3>Painting an axial gradient using a CGGradient object</h3>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="lineno"> 1</span> <span class="n">UIGraphicsBeginImageContextWithOptions</span><span class="p">(</span><span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span><span class="nb">NO</span> <span class="p">,[</span><span class="bp">UIScreen</span> <span class="n">mainScreen</span><span class="p">].</span><span class="n">scale</span><span class="p">);</span>
<span class="lineno"> 2</span> <span class="n">CGContextRef</span> <span class="n">context</span> <span class="o">=</span> <span class="n">UIGraphicsGetCurrentContext</span><span class="p">();</span>
<span class="lineno"> 3</span> <span class="kt">size_t</span> <span class="n">locations</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="lineno"> 4</span> <span class="n">CGFloat</span> <span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span><span class="p">{</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">};</span>
<span class="lineno"> 5</span> <span class="n">CGFloat</span> <span class="n">components</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span>
<span class="lineno"> 6</span>                      <span class="mf">0.8</span><span class="p">,</span><span class="mf">0.8</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">1.0</span><span class="p">};</span>
<span class="lineno"> 7</span> <span class="n">CGColorSpaceRef</span> <span class="n">colorSpace</span> <span class="o">=</span> <span class="n">CGColorSpaceCreateDeviceRGB</span><span class="p">();</span>
<span class="lineno"> 8</span> <span class="n">CGGradientRef</span> <span class="n">mygradient</span>  <span class="o">=</span> <span class="n">CGGradientCreateWithColorComponents</span><span class="p">(</span><span class="n">colorSpace</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">locations</span><span class="p">);</span>
<span class="lineno"> 9</span> <span class="n">CGContextDrawLinearGradient</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="n">mygradient</span><span class="p">,</span><span class="n">CGPointMake</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span><span class="n">CGPointMake</span><span class="p">(</span><span class="mf">200.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="lineno">10</span> <span class="bp">UIImage</span> <span class="o">*</span><span class="n">image</span> <span class="o">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">();</span>
<span class="lineno">11</span> <span class="n">UIGraphicsEndImageContext</span><span class="p">();</span></code></pre></div>

<p><img src="http://sipdar.github.io/image/2014/03/24/gradient2.png" alt="image"></p>

<h3>Painting a radial gradient using a CGGradient object</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">//CGContextDrawLinearGradient (context,mygradient,CGPointMake(0.0, 0.0),CGPointMake(200.0, 200.0), 0);
CGContextDrawRadialGradient (context,mygradient,CGPointMake(10.0, 10.0),10.0f,CGPointMake(150.0, 150.0),50.0f,kCGGradientDrawsBeforeStartLocation &amp; kCGGradientDrawsAfterEndLocation);
</code></pre></div>
<p><img src="http://sipdar.github.io/image/2014/03/24/gradient3.png" alt="image"></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">CGContextDrawRadialGradient (context,mygradient,CGPointMake(100.0, 100.0),0.0f,CGPointMake(100.0, 100.0),100.0f,kCGGradientDrawsBeforeStartLocation &amp; kCGGradientDrawsAfterEndLocation);
</code></pre></div>
<p><img src="http://sipdar.github.io/image/2014/03/24/gradient5.png" alt="image"></p>

<h3>多个颜色渐变</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">size_t locations = 3;
CGFloat location[3] ={0.0,0.5,1.0};
CGFloat components[12] = {1.0,0.5,0.4,1.0,
                            0.5,0.5,0.5,1.0,
                            0.8,0.8,0.3,1.0};
</code></pre></div>
<p><img src="http://sipdar.github.io/image/2014/03/24/gradient4.png" alt="image">                                                    </p>

<h3>用 <strong>Gradient</strong> 实现一个 iOS 6.0风格的高光按钮</h3>

<p>我们继承UIButton 然后在 <strong>- (void)drawRect:</strong>  中 添加渐变效果</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        self.layer.cornerRadius = 8.0f;
        self.layer.masksToBounds = YES;
        self.layer.borderWidth = 1.0f;
        self.layer.borderColor = [UIColor colorWithWhite:0.5f alpha:0.2f].CGColor;
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect {
    CGContextRef ref = UIGraphicsGetCurrentContext();
    CGFloat locations[5] = {0.0,0.5,0.5,0.8,1.0};
    CFArrayRef colors = (__bridge CFArrayRef) @[(id)[UIColor colorWithWhite:1.0f alpha:0.6f].CGColor,
                            (id)[UIColor colorWithWhite:0.9f alpha:0.3f].CGColor,
                            (id)[UIColor colorWithWhite:0.75f alpha:0.2f].CGColor,
                            (id)[UIColor colorWithWhite:0.4f alpha:0.3f].CGColor,
                            (id)[UIColor colorWithWhite:1.0f alpha:0.2f].CGColor];
    CGColorSpaceRef colorSpc = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColors(colorSpc, colors, locations);
    CGContextDrawLinearGradient(ref, gradient, CGPointMake(0.5, 0.0), CGPointMake(0.5, rect.size.height), kCGGradientDrawsAfterEndLocation);
    CGColorSpaceRelease(colorSpc);
    CGGradientRelease(gradient);
}
</code></pre></div>
<p><img src="http://sipdar.github.io/image/2014/03/24/gradient6.png" alt="image">                                                    </p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2015/01/24/Swift%20%E9%97%AD%E5%8C%85/">
            Swift
            <small>24 Jan 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/01/23/ios%E5%BA%94%E7%94%A8%E4%B8%AD%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%BB%A4%E9%95%9C%E7%9A%84%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95/">
            iOS应用中实现图片滤镜的一个简单方法
            <small>23 Jan 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2014/03/30/%E6%97%A7%E8%83%B6%E7%89%87%E6%95%88%E6%9E%9C/">
            Core Image 旧胶片效果
            <small>30 Mar 2014</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>

  </body>
</html>
